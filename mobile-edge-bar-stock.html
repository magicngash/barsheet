<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
        font-size: 16px;
        line-height: 1.4;
      }

      .container {
        width: 100vw;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        min-height: 100vh;
        padding: 12px;
      }

      h2 {
        text-align: center;
        color: #2c3e50;
        margin-bottom: 16px;
        font-size: 1.4rem;
        font-weight: 600;
        padding-top: 8px;
      }

      .header-icon {
        font-size: 1.2em;
        margin-right: 8px;
      }

      .staff-section {
        margin-bottom: 16px;
        text-align: center;
      }

      .staff-section label {
        display: block;
        font-weight: 600;
        color: #34495e;
        margin-bottom: 8px;
        font-size: 1rem;
      }

      #staff {
        width: 100%;
        max-width: 250px;
        padding: 12px;
        border: 2px solid #e0e6ed;
        border-radius: 8px;
        font-size: 1rem;
        background: white;
        color: #2c3e50;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        background: white;
        font-size: 0.9rem;
        margin-bottom: 16px;
      }

      th {
        background: linear-gradient(135deg, #3498db, #2980b9);
        color: white;
        padding: 12px 4px;
        text-align: center;
        font-weight: 600;
        font-size: 0.85rem;
        position: sticky;
        top: 0;
        z-index: 10;
      }

      th:first-child {
        width: 45%;
        text-align: left;
        padding-left: 8px;
      }

      th:nth-child(2),
      th:nth-child(3) {
        width: 27.5%;
      }

      td {
        padding: 8px 4px;
        border-bottom: 1px solid #ecf0f1;
        vertical-align: middle;
      }

      tr:nth-child(even) {
        background-color: #f9f9f9;
      }

      .item-name {
        font-weight: 500;
        color: #2c3e50;
        font-size: 0.9rem;
        text-align: left;
        padding-left: 8px;
        word-wrap: break-word;
        line-height: 1.3;
      }

      input[type="number"] {
        width: 100%;
        max-width: 70px;
        padding: 8px 4px;
        border: 1px solid #ddd;
        border-radius: 4px;
        text-align: center;
        font-size: 0.9rem;
        background: white;
        -moz-appearance: textfield;
        -webkit-appearance: none;
      }

      input[type="number"]::-webkit-outer-spin-button,
      input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      input[type="number"]:focus {
        outline: none;
        border-color: #3498db;
        box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
      }

      .submit-container {
        text-align: center;
        margin-top: 16px;
        padding-bottom: 16px;
      }

      button[type="submit"] {
        background: linear-gradient(135deg, #27ae60, #229954);
        color: white;
        padding: 14px 32px;
        border: none;
        border-radius: 25px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        width: 100%;
        max-width: 250px;
        -webkit-appearance: none;
      }

      button[type="submit"]:active {
        transform: scale(0.98);
        opacity: 0.9;
      }

      /* Very small screens */
      @media (max-width: 360px) {
        .container {
          padding: 8px;
        }
        
        h2 {
          font-size: 1.2rem;
          margin-bottom: 12px;
        }
        
        table {
          font-size: 0.8rem;
        }
        
        th {
          padding: 10px 2px;
          font-size: 0.75rem;
        }
        
        td {
          padding: 6px 2px;
        }
        
        .item-name {
          font-size: 0.8rem;
          padding-left: 4px;
        }
        
        input[type="number"] {
          max-width: 60px;
          padding: 6px 2px;
          font-size: 0.8rem;
        }
        
        button[type="submit"] {
          padding: 12px 24px;
          font-size: 0.9rem;
        }
      }

      /* Landscape orientation */
      @media (orientation: landscape) and (max-height: 500px) {
        .container {
          padding: 8px;
        }
        
        h2 {
          font-size: 1.2rem;
          margin-bottom: 8px;
          padding-top: 4px;
        }
        
        .staff-section {
          margin-bottom: 12px;
        }
        
        th {
          padding: 8px 4px;
          font-size: 0.8rem;
        }
        
        td {
          padding: 6px 4px;
        }
        
        .submit-container {
          margin-top: 12px;
          padding-bottom: 8px;
        }
        
        button[type="submit"] {
          padding: 10px 24px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>
        <span class="header-icon">üç∫</span>
        Bar Stock Entry
      </h2>

      <div class="staff-section">
        <label for="staff">Staff Name:</label>
        <select id="staff">
          <option>John</option>
          <option>Mary</option>
          <option>Lucy</option>
          <option>Kevin</option>
        </select>
      </div>

      <form id="stockForm">
        <table id="itemsTable">
          <thead>
            <tr>
              <th>Item</th>
              <th>Received</th>
              <th>Sold</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        
        <div class="submit-container">
          <button type="submit">Submit Entry</button>
        </div>
      </form>
    </div>

    <script>
      const items = [
        "Tusker Lager", "Smirnoff", "Whitecap", "Guinness", "Heineken",
        "Captain Morgan", "Chrome", "Red Label", "Krest", "Water",
        "Juice", "Ice Cubes", "Soda", "Viceroy", "Snacks",
        "Cigarettes", "Chasers", "Wines", "Beer Towers", "Baileys"
      ];

      const tableBody = document.querySelector("#itemsTable tbody");

      items.forEach((item, index) => {
        const row = document.createElement("tr");

        const itemCell = document.createElement("td");
        itemCell.textContent = item;
        itemCell.className = "item-name";

        const receivedCell = document.createElement("td");
        const receivedInput = document.createElement("input");
        receivedInput.type = "number";
        receivedInput.name = `received_${index}`;
        receivedInput.min = "0";
        receivedInput.placeholder = "0";
        receivedInput.inputMode = "numeric";
        receivedInput.pattern = "[0-9]*";
        receivedCell.appendChild(receivedInput);

        const soldCell = document.createElement("td");
        const soldInput = document.createElement("input");
        soldInput.type = "number";
        soldInput.name = `sold_${index}`;
        soldInput.min = "0";
        soldInput.placeholder = "0";
        soldInput.inputMode = "numeric";
        soldInput.pattern = "[0-9]*";
        soldCell.appendChild(soldInput);

        row.appendChild(itemCell);
        row.appendChild(receivedCell);
        row.appendChild(soldCell);

        tableBody.appendChild(row);
      });

      document.getElementById("stockForm").addEventListener("submit", function (e) {
        e.preventDefault();
        const staff = document.getElementById("staff").value;

        const itemsData = items.map((item, index) => ({
          name: item,
          received: document.querySelector(`[name=received_${index}]`).value || "0",
          sold: document.querySelector(`[name=sold_${index}]`).value || "0"
        }));

        google.script.run.withSuccessHandler((msg) => {
          alert(msg);
          location.reload(); // optional
        }).submitForm({
          staff: staff,
          items: itemsData
        });
      });
    </script>
  </body>
</html>